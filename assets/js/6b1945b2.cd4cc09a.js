"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[874],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=i,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||o;return n?r.createElement(h,a(a({ref:t},c),{},{components:n})):r.createElement(h,a({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5195:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return p}});var r=n(7462),i=n(3366),o=(n(7294),n(3905)),a=["components"],l={title:"Installing on Windows"},s=void 0,u={unversionedId:"windows-install",id:"windows-install",title:"Installing on Windows",description:"Prerequisites:",source:"@site/docs/windows-install.md",sourceDirName:".",slug:"/windows-install",permalink:"/docs/windows-install",draft:!1,editUrl:"https://github.com/notAperson535/OneClick-macOS-Simple-KVM/tree/docs/docs/windows-install.md",tags:[],version:"current",frontMatter:{title:"Installing on Windows"},sidebar:"docs",previous:{title:"Manual Method",permalink:"/docs/manualmethod"},next:{title:"Installing the VM",permalink:"/docs/category/installing-the-vm"}},c={},p=[{value:"Prerequisites:",id:"prerequisites",level:2},{value:"Step 1 (Installing WSL2)",id:"step-1-installing-wsl2",level:2},{value:"Step 2 (Getting the files)",id:"step-2-getting-the-files",level:2},{value:"Step 3 (installing qemu and virtualization capabilities)",id:"step-3-installing-qemu-and-virtualization-capabilities",level:2},{value:"You&#39;re done!",id:"youre-done",level:2},{value:"Now head over to installing macOS for instructions on correctly installing macOS",id:"now-head-over-to-installing-macos-for-instructions-on-correctly-installing-macos",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"cat /sys/module/kvm_intel/parameters/nested returns <code>N</code>, but KVM-OK Returns <code>KVM acceleration can be used</code>",id:"cat-sysmodulekvm_intelparametersnested-returns-n-but-kvm-ok-returns-kvm-acceleration-can-be-used",level:3}],d={toc:p};function m(e){var t=e.components,n=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Windows 10 or Higher"),(0,o.kt)("li",{parentName:"ul"},"Virtualization capabilities"),(0,o.kt)("li",{parentName:"ul"},"8GB of RAM or more")),(0,o.kt)("h2",{id:"step-1-installing-wsl2"},"Step 1 (Installing WSL2)"),(0,o.kt)("p",null,"Install WSL2. If you have WSL2 already, you can skip this step.\nOpen Powershell as an administrator and run this command"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"wsl --install\n")),(0,o.kt)("p",null,"It will prompt a reboot, reboot and let it install Ubuntu. One that is done, make a username and password. It does not have to be the same as the system."),(0,o.kt)("p",null,"If you do not see the window for Ubuntu"),(0,o.kt)("h2",{id:"step-2-getting-the-files"},"Step 2 (Getting the files)"),(0,o.kt)("p",null,"Open a new Ubuntu terminal window, and run this command, replacing the WINDOWS_USER_NAME with the your Windows username, not the Linux one."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cd /mnt/c/users/WINDOWS_USER_NAME/Documents\n")),(0,o.kt)("p",null,"Then run"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"sudo apt install git-all -y\n")),(0,o.kt)("p",null,"Now clone the repository"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"git clone https://github.com/notAperson535/OneClick-macOS-Simple-KVM.git\n")),(0,o.kt)("p",null,"Now cd into the newly created folder"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cd OneClick-macOS-Simple-KVM\n")),(0,o.kt)("h2",{id:"step-3-installing-qemu-and-virtualization-capabilities"},"Step 3 (installing qemu and virtualization capabilities)"),(0,o.kt)("p",null,"Run the included windows installer"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"./windows-install.sh\n")),(0,o.kt)("p",null,"Once you get to the menu (looks like this)\n",(0,o.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/95918679/152704969-29fccfab-de68-4977-b2c7-4fb5b4b5c3cb.png",alt:"image"}),"\nGo to Virtualization and make sure your system processor type is selected, mine is Intel\n",(0,o.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/95918679/152704984-213b067b-1a8e-45cf-ad23-330391c31583.png",alt:"image"}),"\nThen keep clicking exit, and save the configuration"),(0,o.kt)("p",null,"Now run these commands to make sure virtualization works"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"kvm-ok\ncat /sys/module/kvm_intel/parameters/nested\n")),(0,o.kt)("p",null,"If the first command returns ",(0,o.kt)("inlineCode",{parentName:"p"},"KVM acceleration can be used")," and the second command returns ",(0,o.kt)("inlineCode",{parentName:"p"},"Y"),", then you are good to go. If the first command returns ",(0,o.kt)("inlineCode",{parentName:"p"},"Y")," but the second command return something like ",(0,o.kt)("inlineCode",{parentName:"p"},"no"),", than go to the bottom of the page for troubleshooting."),(0,o.kt)("p",null,"Now cd into the OneClick-macOS-Simple-KVM directory, replacing the WINDOWS_USER_NAME with the your Windows username, not the Linux one."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cd /mnt/c/users/WINDOWS_USER_NAME/Documents/OneClick-macOS-Simple-KVM\n")),(0,o.kt)("p",null,"And run ",(0,o.kt)("inlineCode",{parentName:"p"},"./setup.sh")," to finish the setup and run the macOS VM!"),(0,o.kt)("p",null,(0,o.kt)("del",{parentName:"p"},"(Note that the max OS you can run is Big Sur, because of some TSC restrictions. I am working on this issue and when it is resolved I will post a message in the ",(0,o.kt)("a",{parentName:"del",href:"https://discord.gg/XaEdCSPyNa"},"Discord Server"),".)")),(0,o.kt)("p",null,"This now fixed and you can run Monterey and up on Windows"),(0,o.kt)("p",null,"Once setup.sh finsishes , press ctrl+c and run ",(0,o.kt)("inlineCode",{parentName:"p"},"sudo HEADLESS=1 ./basic.sh"),". Once this is done, download VNC Viewer, ",(0,o.kt)("a",{parentName:"p",href:"https://www.realvnc.com/en/connect/download/viewer/"},"here"),", then type ",(0,o.kt)("inlineCode",{parentName:"p"},"localhost:5900")," into the top to connect to the vm using vnc."),(0,o.kt)("p",null,"Whenever you want to load up the machine again, run ",(0,o.kt)("inlineCode",{parentName:"p"},"sudo HEADLESS=1 ./basic.sh"),", NOT ",(0,o.kt)("inlineCode",{parentName:"p"},"./setup.sh"),"."),(0,o.kt)("h2",{id:"youre-done"},"You're done!"),(0,o.kt)("p",null,"Don't close the terminal when the QEMU window is open, as it will shut down the VM and may cause data loss."),(0,o.kt)("h2",{id:"now-head-over-to-installing-macos-for-instructions-on-correctly-installing-macos"},(0,o.kt)("a",{parentName:"h2",href:"https://notaperson535.github.io/OneClick-macOS-Simple-KVM/docs/installing-macos/"},"Now head over to installing macOS for instructions on correctly installing macOS")),(0,o.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("h3",{id:"cat-sysmodulekvm_intelparametersnested-returns-n-but-kvm-ok-returns-kvm-acceleration-can-be-used"},"cat /sys/module/kvm_intel/parameters/nested returns ",(0,o.kt)("inlineCode",{parentName:"h3"},"N"),", but KVM-OK Returns ",(0,o.kt)("inlineCode",{parentName:"h3"},"KVM acceleration can be used")),(0,o.kt)("p",null,"Edit these commands in .wslconfig, which is located in your Windows user directory, replacing the WINDOWS_USER_NAME with the your Windows username, not the Linux one."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"nestedVirtualization=true\nkernel=C:\\\\Users\\\\WINDOWS_USER_NAME\\\\bzImage\ndebugConsole=true\npageReporting=true\nkernelCommandLine=intel_iommu=on iommu=pt kvm.ignore_msrs=1 kvm-intel.nested=1 kvm-intel.ept=1 kvm-intel.emulate_invalid_guest_state=0 kvm-intel.enable_shadow_vmcs=1 kvm-intel.enable_apicv=1\n")))}m.isMDXComponent=!0}}]);